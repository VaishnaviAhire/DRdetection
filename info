mlsaProject/
â”‚
â”œâ”€â”€ dr_project/               # Main Django project folder
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py           # Django settings (installed apps, media path, etc.)
â”‚   â”œâ”€â”€ urls.py               # Main URL routing for the entire project
â”‚   â””â”€â”€ wsgi.py / asgi.py     # Deployment interface (not touched yet)
â”‚
â”œâ”€â”€ dr_app/                   # Your custom app handling image uploads + ML prediction
â”‚   â”œâ”€â”€ migrations/           # Database migrations
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ admin.py              # For admin panel (not used yet)
â”‚   â”œâ”€â”€ apps.py               # App config
â”‚   â”œâ”€â”€ models.py             # (currently empty, could define image model here)
â”‚   â”œâ”€â”€ views.py              # Main logic to handle image upload + response
â”‚   â”œâ”€â”€ forms.py              # Contains form class for image upload
â”‚   â”œâ”€â”€ urls.py               # URL routing specific to dr_app
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ dr_app/
â”‚           â””â”€â”€ upload.html   # Frontend template for form & result
â”‚
â”œâ”€â”€ media/                    # Uploaded images will be saved here
â”‚
â”œâ”€â”€ manage.py                 # Django's command-line tool
â””â”€â”€ env/                      # Virtual environment (ignore in version control)

settings.py (dr_project/settings.py)
You edited this to add:
INSTALLED_APPS = [
    ...
    'dr_app',
]

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'
This lets Django know:
Your custom app exists.
Where to save uploaded images (media/ folder).

ğŸ”¹ urls.py (project level: dr_project/urls.py)
from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('', include('dr_app.urls')),  # â¬…ï¸ App-level routing
    path('admin/', admin.site.urls),
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
âœ”ï¸ This:

Loads the routes from your app
Allows media files (images) to be served while developing

ğŸ”¹ urls.py (dr_app/urls.py)
You created this file to route the homepage (/) to your view:
from django.urls import path
from . import views

urlpatterns = [
    path('', views.upload_image, name='upload_image')
]
âœ”ï¸ This ensures when user visits /, they land on the image upload form.

ğŸ”¹ forms.py (dr_app/forms.py)
You created a simple Django form for uploading an image:
from django import forms

class ImageUploadForm(forms.Form):
    image = forms.ImageField()
âœ”ï¸ This is the form your template uses to accept image input.

ğŸ”¹ views.py (dr_app/views.py)
from django.shortcuts import render
from .forms import ImageUploadForm
from PIL import Image
import os

def upload_image(request):
    prediction = None
    image_url = None

    if request.method == 'POST':
        form = ImageUploadForm(request.POST, request.FILES)
        if form.is_valid():
            image = form.cleaned_data['image']
            image_path = os.path.join('media', 'image.jpg')

            with open(image_path, 'wb+') as destination:
                for chunk in image.chunks():
                    destination.write(chunk)

            # You can call your ML model here
            prediction = "Dummy Prediction: No DR Detected"

            image_url = '/media/image.jpg'

    else:
        form = ImageUploadForm()

    return render(request, 'dr_app/upload.html', {
        'form': form,
        'prediction': prediction,
        'image_url': image_url
    })
âœ”ï¸ It:

Renders form on GET

Accepts image on POST

Saves image to media/

Returns a dummy prediction (youâ€™ll connect the real ML model here later)

Passes data to template for display

ğŸ”¹ upload.html (in templates/dr_app/)
This is your styled frontend form + result page.

Contains:

Card with "Detect Now" heading

File input + Submit button

Displays result and image if prediction is available

âœ”ï¸ Currently includes Bootstrap for styling.

ğŸ”¹ media/
Django saves uploaded files here

When a user uploads an image, itâ€™s stored as media/image.jpg (for now)

Accessible via /media/image.jpg in browser

ğŸ§ª So What Works So Far?
âœ… You have:

A working Django backend
A form that takes fundus images
An endpoint that saves the image and shows dummy prediction
A clean, styled frontend UI

